# KNW-2026-014: CLI en API feature parity — parameters synchroon houden

## Metadata
- **Categorie:** development
- **Relevantie:** midden
- **Datum:** 2026-02-28
- **Sessie-context:** D4 Export feature — review finding PYT-002

## Inzicht

Wanneer dezelfde functionaliteit beschikbaar is via CLI en API, moeten de parameters synchroon blijven. Als de CLI een `--include-archived` flag heeft, moet het API-endpoint een equivalent `include_archived` query parameter aanbieden. Asymmetrie leidt tot incomplete functionaliteit voor API-consumenten.

## Context

De CLI `export` command accepteerde `--include-archived` om ook gearchiveerde sessies mee te nemen. Het API-endpoint `/api/export/project/{slug}` miste deze parameter — API-gebruikers konden alleen niet-gearchiveerde sessies exporteren. De review ving dit op als PYT-002.

## Geleerd

- **Checklist bij nieuwe endpoints:** Loop bij het toevoegen van een API-route altijd de CLI-parameters na en vice versa.
- **Beide interfaces testen:** Tests voor zowel CLI als API moeten dezelfde edge cases dekken.
- **Dit geldt ook voor defaults:** Als de CLI een default waarde heeft (bijv. `--format json`), moet het API-endpoint dezelfde default hanteren.

## Toepassing

- Elke applicatie met meerdere interfaces (CLI, REST API, SDK, UI) naar dezelfde business logica.
- Bij het toevoegen van nieuwe parameters aan bestaande commands/endpoints.
- Bij code reviews: check cross-interface consistentie als review-criterium.
