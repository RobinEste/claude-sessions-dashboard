{"id":"ASD-001","repo":"RobinEste/claude-sessions-dashboard","commit_sha":"0c9c471","file":"lib/store.py","line":306,"end_line":329,"severity":"P1","category":"reliability","title":"add_tasks: TOCTOU race leidt tot verloren task-updates bij gelijktijdige writes","description":"add_tasks volgt het patroon: (1) get_session (read), (2) muteer in-memory, (3) _save_session (write). Er is geen locking. Als twee processen tegelijk add_tasks aanroepen op dezelfde sessie overschrijft de laatste _save_session de wijzigingen van de eerste volledig.","recommended_fix":"Gebruik fcntl.flock voor file-locking rond de read-modify-write cyclus.","confidence":0.85,"status":"open","source":{"type":"ai_agent","name":"async-data-integrity"},"created_at":"2026-02-23T13:00:00Z"}
{"id":"ASD-002","repo":"RobinEste/claude-sessions-dashboard","commit_sha":"0c9c471","file":"lib/store.py","line":485,"end_line":502,"severity":"P1","category":"reliability","title":"cleanup_stale_sessions: heartbeat tussen check en save sluit actieve sessie onterecht","description":"Tussen get_stale_sessions() en _save_session kan een actieve sessie een heartbeat sturen. cleanup_stale_sessions overschrijft de live heartbeat met status=COMPLETED.","recommended_fix":"Hervalideer de heartbeat direct voor de write: herlaad de sessie en check opnieuw of deze nog stale is.","confidence":0.9,"status":"open","source":{"type":"ai_agent","name":"async-data-integrity"},"created_at":"2026-02-23T13:00:00Z"}
{"id":"PYT-001","repo":"RobinEste/claude-sessions-dashboard","commit_sha":"0c9c471","file":"lib/store.py","line":332,"end_line":350,"severity":"P2","category":"backend","title":"update_task accepteert elke status-string zonder validatie in de service laag","description":"De parameter status: str in update_task wordt niet gevalideerd. Directe aanroep met ongeldige waarde schrijft corrupte data naar disk.","recommended_fix":"Voeg VALID_TASK_STATUSES set toe en valideer bij entree van update_task.","confidence":0.92,"status":"open","source":{"type":"ai_agent","name":"python-specialist"},"created_at":"2026-02-23T13:00:00Z"}
{"id":"ASD-003","repo":"RobinEste/claude-sessions-dashboard","commit_sha":"0c9c471","file":"lib/store.py","line":485,"end_line":502,"severity":"P2","category":"reliability","title":"cleanup_stale_sessions slaat last_heartbeat-update over","description":"Alle andere write-operaties updaten session.last_heartbeat voor _save_session. cleanup_stale_sessions laat last_heartbeat op de stale waarde staan, waardoor ended_at recenter is dan last_heartbeat.","recommended_fix":"Voeg session.last_heartbeat = session.ended_at toe voor _save_session.","confidence":0.95,"status":"open","source":{"type":"ai_agent","name":"async-data-integrity"},"created_at":"2026-02-23T13:00:00Z"}
{"id":"PYT-002","repo":"RobinEste/claude-sessions-dashboard","commit_sha":"0c9c471","file":"lib/store.py","line":485,"end_line":502,"severity":"P2","category":"backend","title":"cleanup_stale_sessions absorbeert exceptions zonder logging","description":"except Exception: continue swallowt alle fouten. Bij geautomatiseerde cleanup (launchd) is falen onzichtbaar.","recommended_fix":"Voeg logging.warning toe met session_id en exception details.","confidence":0.9,"status":"open","source":{"type":"ai_agent","name":"python-specialist, logic-correctness"},"created_at":"2026-02-23T13:00:00Z"}
