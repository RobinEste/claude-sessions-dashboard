{"id":"MERGED-001","repo":"RobinEste/claude-sessions-dashboard","commit_sha":"ba80e04","file":"lib/store.py","line":738,"end_line":743,"severity":"P1","category":"reliability","title":"archive_old_sessions archiveert actieve sessie: status-hercontrole ontbreekt binnen lock","description":"Na het verkrijgen van `_session_lock(sid)` controleert `archive_old_sessions` alleen of `path.exists()` True is, maar leest de sessiedata niet opnieuw. De initiële `status == COMPLETED` check vindt buiten het lock-blok plaats. Tussen die check en het acquireren van de lock kan een concurrent proces de sessie hervatten.","recommended_fix":"Herlaad het sessiebestand binnen het lock-blok en hervalideer status voordat shutil.move wordt aangeroepen.","confidence":0.90,"status":"fixed","source":{"type":"ai_agent","name":"security-sentinel, logic-correctness, python-specialist, async-data-integrity"},"created_at":"2026-02-25T18:50:00+01:00"}
{"id":"PYT-002","repo":"RobinEste/claude-sessions-dashboard","commit_sha":"ba80e04","file":"lib/store.py","line":731,"end_line":731,"severity":"P2","category":"backend","title":"KeyError op data[\"session_id\"] breekt volledige archive_old_sessions-iteratie bij corrupt bestand","description":"Op regel 731 wordt `sid = data[\"session_id\"]` gebruikt. Als een JSON-bestand geen `session_id` veld bevat, gooit dit een onbehandelde `KeyError` die de volledige iteratie breekt.","recommended_fix":"sid = data.get(\"session_id\")\nif not sid:\n    logger.warning(\"Skipping file without session_id: %s\", path)\n    continue","confidence":0.85,"status":"fixed","source":{"type":"ai_agent","name":"python-specialist"},"created_at":"2026-02-25T18:50:00+01:00"}
{"id":"PRF-001","repo":"RobinEste/claude-sessions-dashboard","commit_sha":"ba80e04","file":"lib/store.py","line":566,"end_line":566,"severity":"P2","category":"performance","title":"Migratie wordt herhaald op elke list_sessions-aanroep zonder persistentie","description":"De aanroep van `_migrate_session_data(data)` in de `list_sessions`-loop migreert v1-sessiebestanden in-memory, maar slaat het resultaat nooit terug op schijf.","recommended_fix":"data = _migrate_session_data(data)\nif data.get('schema_version', 1) < SCHEMA_VERSION:\n    _atomic_write(path, data)","confidence":0.85,"status":"open","source":{"type":"ai_agent","name":"performance-reviewer"},"created_at":"2026-02-25T18:50:00+01:00"}
{"id":"ASD-002","repo":"RobinEste/claude-sessions-dashboard","commit_sha":"ba80e04","file":"lib/store.py","line":689,"end_line":691,"severity":"P2","category":"reliability","title":"Lock-bestand verwijderd buiten _session_lock veroorzaakt gebroken locking-invariant","description":"In `archive_session` wordt het `.lock`-bestand verwijderd ná het verlaten van het `with _session_lock`-blok, wat het locking-invariant breekt.","recommended_fix":"Verplaats de lock.unlink() aanroep naar binnen het with _session_lock blok.","confidence":0.80,"status":"fixed","source":{"type":"ai_agent","name":"async-data-integrity"},"created_at":"2026-02-25T18:50:00+01:00"}
